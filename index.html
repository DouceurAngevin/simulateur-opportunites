<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Simulateur d’opportunités (minimal · style Notion)</title>
  <link rel="stylesheet" href="src/styles/brand.css" />
  <link rel="stylesheet" href="src/styles/app.css" />
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Simulateur d’opportunités (version minimale)</h1>
      <p>Aucune donnée n’est envoyée côté serveur. Modifiez les valeurs et cliquez sur Calculer.</p>

      <div class="grid">
        <div>
          <label>Visites qualifiées / mois</label>
          <input id="visits" type="number" placeholder="ex. 5000" min="0" />
        </div>
        <div>
          <label>Taux de conversion actuel (%)</label>
          <input id="conv" type="number" placeholder="ex. 1.5" step="0.1" min="0" max="100" />
        </div>
        <div>
          <label>Panier moyen (€)</label>
          <input id="aov" type="number" placeholder="ex. 60" step="0.01" min="0" />
        </div>
        <div>
          <label>Amélioration visée (points de %)</label>
          <input id="delta" type="number" placeholder="ex. 1" step="0.1" min="0" />
        </div>
        <div>
          <label>Budget pub mensuel (optionnel) (€)</label>
          <input id="adspend" type="number" placeholder="ex. 1500" step="1" min="0" />
        </div>
        <div class="row" style="align-self:end">
          <button class="btn" onclick="calc()">Calculer</button>
          <a class="link" id="cta" href="https://nexus-strategie.fr/Nexus-26fc5cfed6a88039a83beff4f81756fa?source=copy_link#26fc5cfed6a88056a43cf40d86a8200a" target="_blank" rel="noopener">Réserver un audit gratuit (30 min)</a>
        </div>
      </div>

      <div class="kpi">
        <div class="box"><h3>CA mensuel actuel (estimé)</h3><div class="val" id="caActuel">—</div></div>
        <div class="box"><h3>Gains potentiels (Δ visée)</h3><div class="val" id="gain">—</div></div>
        <div class="box"><h3>CA mensuel projeté</h3><div class="val" id="caProjete">—</div></div>
        <div class="box"><h3>ROI pub (indicatif)</h3><div class="val" id="roi">—</div></div>
      </div>

      <p class="foot">Formule e‑commerce simple : CA = Visites × (Taux/100) × Panier. Δ = Visites × (Δ points/100) × Panier. ROI = (Δ − Budget) / max(Budget,1).</p>
    </div>
  </div>

  <script>
    function n(id, def) {
      const el = document.getElementById(id);
      const v = parseFloat((el.value || '').replace(',', '.'));
      return Number.isFinite(v) ? v : def;
    }

    function eur(value) {
      return new Intl.NumberFormat('fr-FR', {
        style: 'currency',
        currency: 'EUR',
        maximumFractionDigits: 0,
      }).format(value || 0);
    }

    function calc() {
      const visits = Math.max(0, n('visits', 5000));
      const conv = Math.max(0, Math.min(100, n('conv', 1.5)));
      const aov = Math.max(0, n('aov', 60));
      const delta = Math.max(0, n('delta', 1));
      const adspend = Math.max(0, n('adspend', 0));

      const caActuel = visits * (conv / 100) * aov;
      const gain = visits * (delta / 100) * aov;
      const caProjete = caActuel + gain;
      const roi = adspend > 0 ? (gain - adspend) / adspend : (gain > 0 ? Infinity : 0);

      document.getElementById('caActuel').textContent = eur(caActuel);
      document.getElementById('gain').textContent = eur(gain);
      document.getElementById('caProjete').textContent = eur(caProjete);
      document.getElementById('roi').textContent = roi === Infinity
        ? '∞'
        : new Intl.NumberFormat('fr-FR', {
            style: 'percent',
            maximumFractionDigits: 1,
          }).format(roi);
    }
  </script>
</body>
</html>
